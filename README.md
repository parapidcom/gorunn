# Gorunn CLI Documentation

Gorunn is a powerful CLI tool for managing local development environments with Docker. It provides a streamlined way to manage multiple projects, handle environment configurations, and orchestrate various services.
![Gorunn Init](init.gif)


## Minimum Requirements:
- Python 3.9+
- Docker and Docker Compose
- MacOS (currently supported OS)


## Supported languages
- Python
- Node.js / Next.js
- PHP

## Installation

```bash
pip install gorunn
```

## Quick Start

### Initialize the stack
1. Prepare project manifest by following the [example](https://github.com/parapidcom/gorunn-example-projects) structure.

2. Initialize the stack and follow the prompts:
```bash
gorunn init
```

When you run gorunn init, you'll be prompted to configure:
- **Stack name** (default: gorunn). This will be used as a prefix for all the services.
- **Projects repository URL** (optional). If you have one.
- **Projects local path**. This is where your project manifests will be stored.
- **Workspace path**. This is where your application local directory will be created or cloned.
- **Docker network subnet**. This is the subnet for the Docker network. Leave empty to use default if you don't know what it is, change only in case you have conflict with your existing docker compose network subnet.
- **Database selection** (MySQL, PostgreSQL, Redis, Chroma, OpenSearch). This is the databases you want to use.
- **Encryption key for environment variables**. This is the key used to encrypt your environment variables so that you can safely push them to repo together with project manifests.
- **Aider AI assistant**. You will be prompted to enable [Aider](https://aider.chat) AI assistant for your project. If you want to use it, prepare your OpenAI API or Anthropic API key.
You can specify project manifest directory as an option:

```bash
gorunn init --import /path/to/your/projects-manifests
```

or you can specify project manifest repository URL if you have one:

```bash
gorunn init --import git@github.com:yourorg/projects-manifests.git
```

#### Example Stack
Optionally you can use our example project stack with `react`, `laravel` and `django` projects:
```bash
gorunn init --import https://github.com/parapidcom/gorunn-example-projects.git
```
⚠️ **Use this key for example environment variables decryption**: Iourmut6ww9u4T6e4DZ35wJpRKQqdQH6iz0m2TsvxfU=
### Parse the project manifests
```bash
gorunn parse
```
### Build the projects
This command will iterate over build_commands defined in the project manifests and run them inside containers.
You can build all projects:
```bash
gorunn build --app all
```

or specific one:

```bash
gorunn build --app myapp
```

## Configuration

### Configuration File Location
The main configuration file is stored at:
```
$HOME/.config/gorunn/config.yaml
```

### Directory Structure
```
$HOME/.config/gorunn/
├── config.yaml           # Main configuration generated by `gorunn init`
```

## Project Manifests and Environment Files Location
Project manifests locations defaults to `$HOME/gorunn/projects/` during `gorunn init`.
Can be manually changed in the main configuration file.


### Environment Variables
Environment files are part of the project manifests directory structure. They are stored in `projects.path` / `env/` directory.


#### Encrypt an environment file
```bash
gorunn projects env --encrypt --app myapp
```

#### Decrypt an environment file
```bash
gorunn projects env --decrypt --app myapp
```

### Project Management Commands

#### Pull latest project manifests from remote repository
```bash
gorunn projects pull
```

#### Push project manifests and environment files changes to remote repository
```bash
gorunn projects publish
```

#### Show stack projects information
```bash
gorunn info
```

### Build Commands
#### Build all projects defined in the project manifests directory
```bash
gorunn build --app all
```

#### Build specific project
```bash
gorunn build --app myapp
```

### Container Management

#### Start containers
```bash
gorunn start [--app APP_NAME]
```

#### Stop containers
```bash
gorunn stop [--app APP_NAME]
```

#### Restart containers
```bash
gorunn restart [--app APP_NAME]
```

#### Stream logs
```bash
gorunn logs [--app APP_NAME] [--follow]
```

#### Access terminal
```bash
gorunn terminal --app APP_NAME
```

#### Aider AI assistant
You can use [Aider](https://aider.chat) to help you with your project if you have enabled it and provided your LLM API key.
```bash
gorunn aider --app APP_NAME --browser
```
This will start Aider in browser mode and you can use it to help you code in browser on http://localhost:8501

### Info
Print information about the stack.
```bash
gorunn info
```

### Version
Print currently installed Gorunn version.
```bash
gorunn version
```

#### Trust
On MacOS, you can add the Gorunn's self signed certificate for `*.local.gorunn.io domain` to keychain.
It is done automatically during `gorunn init`.

```bash
gorunn trust
```

## Best Practices

### Project Manifests
- Keep manifests in version control
- Use consistent naming conventions

### Environment Variables
  - Always use encryption for sensitive data
  - Keep backup of encryption keys
  - Use separate env files per environment

### Resource Management
  - Stop unused services to free resources
  - Regular cleanup using gorunn destroy
  - Monitor container logs for issues
